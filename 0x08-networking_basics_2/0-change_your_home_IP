#!/usr/bin/env bash

# Configures an Ubuntu server: localhost resolves to 127.0.0.2, facebook.com resolves to 8.8.8.8

# Check for sudo privileges
if [ "$(id -u)" != "0" ]; then
    echo "Please run this script with elevated privileges (sudo)." >&2
    exit 1
fi

# Backup the current /etc/hosts file with a timestamp
timestamp=$(date +"%Y%m%d%H%M%S")
cp /etc/hosts "/etc/hosts_backup_$timestamp"

# Create a new hosts file with the desired configurations
echo "127.0.0.2	localhost" > /etc/hosts.new
echo "8.8.8.8	facebook.com" >> /etc/hosts.new

# Overwrite the existing hosts file
cp -f /etc/hosts.new /etc/hosts

echo "DNS resolution configured successfully."

